第一章 文献综述
============================

1.1 概述
---------------------------
语音合成技术(Text-To-Speech,TTS)， 是一种将给定的输入文字转换成语音的技术。目前语音合成技术已被广泛地用于各种应用，例如智能家居，银行系统，车载导航系统，电子书阅读器，口语对话系统，智能语音机器人，语音翻译系统等。通常TTS分为前端和后端两个部分，前端将文本转换为语言学特征向量，后端则根据语言学特征向量合成语音波形。近年来，端到端语音合成技术也快速发展，效果甚至优于原来基于拼接(concatenate)和统计参数(parameter)的语音合成技术。

1.2 语音合成的研究概况
---------------------------------------------------

1.2.1 语音合成的研究历史
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
近几十年来，语音合成的技术也随着个人计算机的大量普及和推广应用，逐渐从实验室的研究走向大众的视野，越来越多的人开始了解和接触语音合成的技术对生活带来的影响和变化，语音合成技术彻底进入了计算机式合成器的阶段。在这个期间，产生了许多新的语音合成理论，例如基于波形的拼接合成方法、基于隐马尔可夫模型(HMM)的参数合成技术和基于大量语料库的单元选择技术等等相继出现。科学家Fant于1960年提出的系统、详尽的语音合成的理论，并且很好地促进了语音合成技术的发展。随后，线性预测分析(LPC)技术被相继提出，并迅速成为了当时最有效、实用的语音分析和语音合成技术之一，在1980年，Klatt设计出了产生元音、浊辅音和清辅音的串/并联混合型共振峰合成器［3］，同时为了实现模拟不同的嗓音，它还能对来自声源的激励做出不同的调整。
随着计算机的存储及运算能力的逐步提高，基音同步叠加的时域波形修改算法PSOLA(PitchSynchronousOverlapAddmethod,PSOLA)在20世纪80年代末被首次提出，该技术很好地解决了语音段之间的拼接问题，后来逐渐发展成为了基于大量语料库的单元选择与波形拼接合成的方法。到了20世纪90年代，随着电子计算机技术和语言学资源的丰富，出现了更大的语音数据库，并被用来作为选择更合适的语音［4］。基于大量语料库的单元选择与波形拼接合成的方法的主要思想是通过对输入文本的分析来得到待合成语音的相关信息，并通过对先前制作好的语料库进行遍历和匹配，从中找出最佳匹配的语音合成单元，通过对多个合成单元的适当的修正和拼接，最后输出高质量的合成语音［5］。由于采用了人们大量的自然语音作为合成单元，此方法合成的语音自然度较高，但缺点也十分明显，它需要预先制作大量且高质量的语料库，而且还需要大量人工录制和整理工作，对计算机的运算性能和算法的优化程度要求也较高。
随着基于大语料库和波形拼接的语音合成技术发展，到了上世纪90年代末出现了另一种利用语料库数据驱动的方法，被称为基于统计参数的语音合成技术，在这种方法中，语音的声学参数被使用并生成了一个模拟时间序列的随机生成模型，常用的统计参数语音合成技术是基于隐马尔可夫模型(HMM)［6］来做的，日本名古屋工业大学的Tokuda、Huang教授和其带领的团队于1995年提出了基于隐马尔可夫模型(HiddenMarkovModel,HMM)建模与参数生成的合成方法［7］，HMM模型的引入极大地促进了语音合成技术的发展。
基于HMM的语音合成部分是先通过前端文本分析对输入文本进行信息提取，来生成的对应的声学参数，后端再由语音合成器来产生语音波形。基于HMM模型的语音合成方法优点是在只需要少量的语料作为驱动数据，不需要人工的干预进行不断的自主学习和训练，生成对应的最佳HMM模型，迅速搭建起一套语音合成的系统［8］。由于只需要训练好的HMM模型和合成器，搭建起来的系统占用的计算机资源少，适合在嵌入式设备上使用，而且，对于系统合成的语音，我们可以根据自己的需要来改变合成语音的发音风格，如音调、韵律等信息，合成语音的可塑性强。
近年来端到端的语音合成技术也快速发展，例如最早由谷歌DeepMind提出的WaveNet模型，能够直接生成语音波形从而取代了传统语音合成系统中的声码器。随后更多的端到端语音合成系统被提出，例如百度的3代Deep Voice，谷歌的Tacotron以及学界的char2wav模型。

1.2.2国内外语音合成技术现状
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

国外不乏语音合成技术实力雄厚的公司和高校，例如IBM，拥有Siri语音助手的苹果公司，实力强劲的Google，拥有语音助手Cortana的微软公司。而知名的高校如蒙特利尔大学MILA，爱丁堡大学The University of Edinburgh。
国内近年来语音技术也蓬勃发展，知名的公司如科大讯飞，百度，灵声科技，云知声，高校则有清华大学、中科院声学所、中科院自动化所等几家单位里面。


1.3 语音合成技术的分类与研究现状
---------------------------------------------------

目前语音合成技术主要有

    * 波形拼接合成
    * 统计参数语音合成
    * 端到端的语音合成

**波形拼接合成**
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

波形拼接即是在合成语音时根据一定的规则从语音库中选取合适的语音单元，利用拼接算法将语音单元拼接起来，生成语音。

    * 优点:当语音库足够大时，它合成出来的语音自然度相当高。
    * 缺点：需要占用大量的存储空间，不适用于嵌入式系统。此外，其发音单一，不利于改变特征。并且当需要改变任何一项语音特征时，就需要重新建立一个新的语音库，成本高昂。
    
波形合成法一般有两种形式，一种是波形编码合成，它类似于语音编码中的波形编解码方法，该方法直接把要合成的语音发音波形进行存储，或者进行波形编码压缩后存储，合成重放时再解码组合输出。另一种是波形编辑合成，它把波形编辑技术用于语音合成，通过选取音库中采取自然语言的合成单元的波形，对这些波形进行编辑拼接后输出。它采用语音编码技术，存储适当的语音单元，合成时，经解码、波形编辑拼接、平滑处理等输出所需的短语、语句或段落。

波形语音合成法是一种相对简单的TTS语音技术，通常只能合成有限词汇的语音段。目前许多专门用途的语音芯片或语音IC，都采用这种方式，如自动报时、报站或报警等。
 
**统计参数语音合成**
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
参数合成法，是一种比较复杂的方法。为了节约存储容量，必须先对语音信号进行分析，提取出语音的参数，以压缩存储量，然后由人工控制这些参数的合成。参数合成法一般有发音器官参数合成和声道模型参数合成。发音器官参数合成法是对人的发音过程直接进行模拟。它定义了唇、舌、声带的相关参数，如唇开口度、舌高度、舌位置、声带张力等，由发音参数估计声道截面积函数，进而计算声波。由于人的发音生理过程的复杂性和理论计算与物理模拟的差别，合成语音的质量暂时还不理想。在研究过程中,陆续产生如基于LPC、LSP、LMA、MFCC等声学参数的合成系统。

参数语音合成指的是通过采用数字信号处理的方法，用一个滤波器来模拟人类发音过程，将人类发声过程看做是一个模拟声门状态的源，去激励一个表征声道谐振特性的时变数字滤波器，这个源可能是周期脉冲序列，它代表浊音情况下的声带振动，或者是随机的噪声序列，代表不出声的清音。调整滤波器的参数等效于改变口腔及声道形状，达到控制发出不同声音的目的，而调整激励源脉冲序列的周期或强度，将改变合成语音的音调、重音等。因此，只要正确控制激烈源和滤波器参数（一般每隔10~30ms送一组），这个模型就能灵活地合成出各种语句来，因此称作参数合成的方法。[3]

* 缺点：合成出的语音容易带有机器味，算法复杂，参数多，而且在压缩比较大时，信息丢失亦大
* 优点：灵活性强，只要经过合理的参数调整，就可以灵活地合成出所需要的语音；只需要较小的语料库

**规则合成法**
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
规则合成方法通过语音学规则产生语音。合成的词汇表不是事先确定，系统中存储的是最小的语音单位的声学参数，以及由音素组成音节、由音节组成词、由词组成句子和控制音调、轻重音等韵律的各种规则。
给出待合成的文本数据后，合成系统利用规则自动地将他们转换成连续的语音声波。这种方法可以合成无限词汇的语句。这种算法中，用于波形拼接和韵律控制的、较有代表性的算法是基音同步叠加技术（PSOLA），该方法既能保持所发音的主要音段特征，又能在拼接时灵活调整其基频、时长和强度等超音段特征。其核心思想是，直接对存储于音库的语音运用PSOLA算法来进行拼接，从而整合成完整的语音。有别于传统概念上只是将不同的语音单元进行简单拼接的波形编辑合成，规则合成系统首先要在大量语音库中，选择最合适的语音单元来用于拼接，并在选音过程中往往采用多种复杂的技术，最后在拼接时，要使用如PSOLA算法等，对其合成语音的韵律特征进行修改，从而使合成的语音能达到很高的音质。

**端到端的语音合成**
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

端到端(End to End)语音合成方法是近年来开始流行的新技术。有别于传统的语音合成方法，端到端语音合成系统通常只需要少量的语音、语言知识，并且输入文本，直接输出语音，中间不需要将语音转换为声学参数再转换为语音波形。典型的端到端语音合成系统如Tacotron，其采用的结构为基于encoder-decoder的Seq2Seq的结构。其中还引入了注意机制（attention mechanism）

使用端到端语音合成好处如下：

    * 减少特征工程，只需要输入文本即可，其他特征模型自己学习
    * 各种条件方便添加，例如语种、说话人、情感等
    * 避免了多个子模型的误差传递和积累

而缺点如下

    * 模型复杂。用一个模型端到端方式合成语音，虽然省去了中间步骤，但模型复杂，不好调试，不好训练
    * 模型除错难。训练再好的模型，也可能对某些文本发音错误，这时，想要纠正这些错误，很难；需要重新准备数据、再次训练，再次训练也不一定能克服那些问题，代价很大。
    * 人为干预能力差。参数合成往往可以人为指定语速、重音、断句、停顿、韵律等信息，进行个性化合成。然而，端到端合成这些信息全部由模型自己学习，很难加入人为控制。因此，很难产品化。

1.4 论文的主要内容
---------------------------------------------------

本文主要研究基于神经网络的统计参数语音合成系统。隐马尔可夫模型(Hidden Markov Model, HMM)语音合成技 术，以自己构建好的语料库作为训练数据，通过对语音参数进行建模和参数生成的 合成方法来搭建起一套基于HMM的可训练语音合成系统。为了实现这个系统，我 们做了大量的工作，主要完成了以下任务：
(1) 借鉴国外基于HMM的英语、日语语料库的构建经验，我们查阅大量的中文
语言学文献，针对汉语的语言特性，收集并制作了包含丰富语言学特征的550条中 文文本语料，并将这些文本语料录制成语音文件，建立起一套自己的语料库。
(2) 根据汉语的语法、发音、韵律等特点，对文本语料的韵律、词性等进行分类， 将文本语料的句子结构划分为了6个层次，基于决策树聚类的方法，对中文标注的 上下文属性和问题集进行设计和制作，并借助Praat等专业软件，编写标注工具， 对中文语料库进行精确的标注，建立起一套与中文语料库配套的含有时间信息和丰 富上下文信息的标注系统。
(3) 参考国内外众多基于HMM语音合成技术的论文，在Linux的系统环境下， 独立配置和搭建起了本次用于HMM语音合成的系统，并针对于中文进行了适配和 优化，通过HMM训练参数的配置和不断调试，训练出了一个比较理想的HMM模 型。
(4) 利用训练生成的HMM模型，将待合成的测试文本通过合成器转化成我们需 要的语音文件，并通过设计的语音合成评测系统，对合成的语音质量进行了打分评 测和结果分析。
1.4论文的章节安排
本次论文主要以基于HMM的语音合成技术为研究内容，学习基于HMM语音 合成的基本原理和方法，并针对汉语的特点作了系统的优化和语料数据的准备，最 终搭建起了一套支持中文的HMM语音合成系统，在第一章中，我们简单介绍了语 音合成的基本概念、历史背景和国内外的发展现状，接下的章节中我们将详细介绍 基于HMM语音合成的原理以及系统的搭建，具体的章节安排如下：
第二章讲解了隐马尔可夫模型(HMM)的相关原理，并介绍HMM相关的算 法推导及其在语音合成技术中的应用，同时还对现阶段国内外著名的研究机构所提 出HMM语音合成技术进行了对比，最终确定了本次基于HMM语音合成系统的框 架，并对本次系统搭建所需要的主要工具包HTS (HMM-based Speech Synthesis System)的语音合成框架作了简要介绍。
第三章介绍了本次中文语音合成系统的设计思路，首先针对中文的语言学特征
进行分析，借鉴了 HTS日语合成的经验，选取了汉语音素作为本次系统的合成基 元，接下来对本次用于训练的中文语料库作了详细的设计，收集了包含丰富语言学 特征的550条中文文本语料，并设计了包含上下文属性的标注结构及内容，最后还 设计了 200条用于决策树分类的问题集。
第四章对本次系统的实现过程进行了详细的介绍，首先在Linux的环境下配置 好了 HTS及其依赖的一系列工具包，接下来，我们进行前期的数据准备，并录制 了本次用于训练的语音库，并借助Praat等软件完成了对语料库的标注，然后对语 料库数据进行HMM训练，最后通过合成器合成了 20条测试语音。最后，我们对 这些测试语音的可懂度和自然度进行了评测，对测试结果进行了详细分析，并针对以 后的改进方向作了说明。
第五章对本文的研究内容作了总结，并对以后语音合成的学习和研究方向进行 了展望。