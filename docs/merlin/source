Merlin源码详解
===============================================

关于merlin的详细解读，可参考candlewill的gist https://gist.github.com/candlewill/5584911728260904414b4a6679a93d53

网络配置文件详解
-----------------------------------------------

训练时长模型需要一个配置文件（后续的声学模型也一样）。一般而言，在一个样例配置文件上做一些修改即可。例如，训练DNN模型所用的样例配置文件为[duration_demo.conf](https://github.com/CSTR-Edinburgh/merlin/blob/master/misc/recipes/duration_demo.conf)。

Merlin称这些不同的样例配置文件为recipes，全部recipes可见：https://github.com/CSTR-Edinburgh/merlin/tree/master/misc/recipes 。

配置文件，主要包含路径信息、对齐方式、问题集名称、模型结构、数据划分、执行过程等信息。

run_merlin.py
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
程序执行入口，路径为：https://github.com/CSTR-Edinburgh/merlin/blob/master/src/run_merlin.py

执行过程
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
按照配置文件中不同的sub-processes，将会有不同的执行方式。

+----------+---------------+---------------+--------+------------------------+
| 顺序编号 |      代码      |    配置文件   | 默认值 |         解释          |
+==========+===============+===============+========+========================+
| 1        | GenTestList   | GenTestList   | False  | 产生测试列表            |
+----------+---------------+---------------+--------+------------------------+
| 2        | AcousticModel | AcousticModel | False  | 声学模型                 |
+----------+---------------+---------------+--------+------------------------+
| 3        | NORMLAB       | NORMLAB       | False  | 对标签进行归一化         |
+----------+---------------+---------------+--------+------------------------+
| 4        | MAKEDUR       | MAKEDUR       | False  | 产生输出的时长数据       |
+----------+---------------+---------------+--------+------------------------+
| 5        | MAKECMP       | MAKECMP       | False  | 产生输出的声学数据       |
+----------+---------------+---------------+--------+------------------------+
| 6        | NORMCMP       | NORMCMP       | False  | 归一化输出的声学数据     |
+----------+---------------+---------------+--------+------------------------+
| 7        | TRAINDNN      | TRAINDNN      | False  | 是否需要训练模型         |
+----------+---------------+---------------+--------+------------------------+
| 8        | GENBNFEA      | GENBNFEA      | False  | 产生瓶颈层特征           |
+----------+---------------+---------------+--------+------------------------+
| 9        | DNNGEN        | DNNGEN        | False  | 预测                    |
+----------+---------------+---------------+--------+------------------------+
| 10       | GENWAV        | GENWAV        | False  | 产生wav音频             |
+----------+---------------+---------------+--------+------------------------+
| 11       | DurationModel | DurationModel | False  | 时长模型                 |
+----------+---------------+---------------+--------+------------------------+
| 12       | CALMCD        | CALMCD        | False  | 模型评估                 |
+----------+---------------+---------------+--------+------------------------+


上述各个参数默认取值都为`False`，因此配置文件中只需要设置取值为`True`的参数即可。

训练时长模型，训练声学模型，测试时长模型，测试声学模型对应的配置文件，指定的执行流程，分别如下所示：

训练时长模型

::
    
    NORMLAB  : True
    MAKEDUR  : True
    MAKECMP  : True
    NORMCMP  : True

    TRAINDNN : True
    DNNGEN   : True

    CALMCD   : True

训练声学模型

::

    NORMLAB  : True
    MAKECMP  : True
    NORMCMP  : True

    TRAINDNN : True
    DNNGEN   : True

    GENWAV   : True
    CALMCD   : True

测试时长模型

::

    NORMLAB: True
    DNNGEN: True

测试声学模型

::

    NORMLAB  : True
    DNNGEN   : True

    GENWAV   : True